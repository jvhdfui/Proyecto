<%- include("templates/encabezado.ejs", {titulo:"Editar Receta"}) %>
<style>
    body{
  font-family: 'Indie Flower', cursive;
  margin:20px;
  background-image: url("/fondo2.jpeg");
  background-repeat: no-repeat;
  background-attachment: fixed; 
  background-size: cover;
}
</style>
  </head>
  <body>
<form action="/editar/<%= receta._id %>" id="formulario" method="POST">
  <label>Nombre de la receta:</label>
  <input class="form-control mb-3" type="text" name="nombre" id="nombre" 
  value="<%= receta.nombre %>" placeholder="Nombre de la receta">

  <section id="contenedor-ingredientes">
    <label>Ingredientes:</label>
    <div id="contenedorIngredientes"> 
      <% receta.ingredientes.forEach((ingrediente, index) => { %>
        <input class="form-control mb-3" type="text" name="ingredientes[]" 
        value="<%= ingrediente %>" placeholder="Nombre del ingrediente">
      <% }) %>
      
      <button type="button" id="btnAgregarIngrediente" class="btn btn-outline-primary mb-3">
                + Agregar otro ingrediente
      </button>
    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const boton = document.getElementById('btnAgregarIngrediente');
      boton.addEventListener('click', () => {
        const nuevoInputHTML = `<input class="form-control mb-3" type="text" name="ingredientes[]"
        placeholder="Nombre del ingrediente">`;
        boton.insertAdjacentHTML('beforebegin', nuevoInputHTML);
      });
    });
  </script>

  <label>Preparación:</label>
  <textarea class="form-control mb-3" name="preparacion" id="preparacion" 
  placeholder="Describe los pasos para preparar la receta (Ennumerados)"><%= receta.preparacion %></textarea>

  <label>Tiempo de preparación:</label>
  <input class="form-control mb-3" type="text" name="tiempo" id="tiempo" 
  value="<%= receta.tiempo %>" placeholder="Ej. 30 min">

  <p>
    <fieldset>
      <label>Dificultad:</label>
      <div>
        <input type="radio" id="Facil" name="dificultad" value="facil" 
        <%= receta.dificultad === 'facil' ? 'checked' : '' %> />
        <label for="Facil">Fácil</label>

        <input type="radio" id="Media" name="dificultad" value="media" 
        <%= receta.dificultad === 'media' ? 'checked' : '' %> />
        <label for="Media">Media</label>

        <input type="radio" id="Dificil" name="dificultad" value="dificil" 
        <%= receta.dificultad === 'dificil' ? 'checked' : '' %> />
        <label for="Dificil">Difícil</label>
      </div>
    </fieldset>
  </p>

  <label>Categoría:</label>
  <select class="form-control mb-3" name="categoria" id="categoria">
    <option value="Postres" <%= receta.categoria === 'Postres' ? 'selected' : '' %>>Postres</option>
    <option value="Bebidas" <%= receta.categoria === 'Bebidas' ? 'selected' : '' %>>Bebidas</option>
    <option value="Platos Principales" <%= receta.categoria === 'Platos Principales' ? 'selected' : '' %>>Platos Principales</option>
    <option value="Ensaladas" <%= receta.categoria === 'Ensaladas' ? 'selected' : '' %>>Ensaladas</option>
    <option value="Carnes" <%= receta.categoria === 'Carnes' ? 'selected' : '' %>>Carnes</option>
    <option value="Salsas" <%= receta.categoria === 'Salsas' ? 'selected' : '' %>>Salsas</option>
    <option value="Sopas" <%= receta.categoria === 'Sopas' ? 'selected' : '' %>>Sopas</option>
    <option value="Pescados" <%= receta.categoria === 'Pescados' ? 'selected' : '' %>>Pescados</option>
    <option value="Pastas" <%= receta.categoria === 'Pastas' ? 'selected' : '' %>>Pastas</option>
    <option value="Comida Rapida" <%= receta.categoria === 'Comida Rapida' ? 'selected' : '' %>>Comida Rápida</option>
    <option value="Desayunos" <%= receta.categoria === 'Desayunos' ? 'selected' : '' %>>Desayunos</option>
    <option value="Snacks" <%= receta.categoria === 'Snacks' ? 'selected' : '' %>>Snacks</option>
    <option value="Comida Vegetariana" <%= receta.categoria === 'Comida Vegetariana' ? 'selected' : '' %>>Comida Vegetariana</option>
  </select>

  <label>Enlace a un video de YouTube:</label>
  <input class="form-control mb-3" type="url" name="url_video" id="url_video"
  value="<%= receta.url_video %>" 
  placeholder="Ej. https://www.youtube.com/watch?v=a">

  <button type="submit" class="btn btn-success">Guardar receta</button>
  <button type="reset" class="btn btn-outline-danger">Borrar</button>
  <a href="/" class="btn btn-outline-secondary">Home</a>
</form>

<%- include("templates/pie.ejs") %>